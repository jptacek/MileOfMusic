(function(){"use strict";var n=angular.module("LocalStorageModule",[]);n.provider("localStorageService",function(){this.prefix="ls";this.storageType="localStorage";this.cookie={expiry:30,path:"/"};this.notify={setItem:!0,removeItem:!1};this.setPrefix=function(n){this.prefix=n};this.setStorageType=function(n){this.storageType=n};this.setStorageCookie=function(n,t){this.cookie={expiry:n,path:t}};this.setStorageCookieDomain=function(n){this.cookie.domain=n};this.setNotify=function(n,t){this.notify={setItem:n,removeItem:t}};this.$get=["$rootScope","$window","$document",function(n,t,i){var r=this.prefix,e=this.cookie,h=this.notify,o=this.storageType,u=t[o];i||(i=document);r.substr(-1)!=="."&&(r=!r?"":r+".");var f=function(){try{var f=o in t&&t[o]!==null,i=r+"__"+Math.round(Math.random()*1e7);return f&&(u.setItem(i,""),u.removeItem(i)),!0}catch(e){return o="cookie",n.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),a=function(t,i){if(!f)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),h.setItem&&n.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:i,storageType:"cookie"}),s(t,i);typeof i=="undefined"&&(i=null);try{(angular.isObject(i)||angular.isArray(i))&&(i=angular.toJson(i));u.setItem(r+t,i);h.setItem&&n.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:i,storageType:this.storageType})}catch(e){return n.$broadcast("LocalStorageModule.notification.error",e.message),s(t,i)}return!0},w=function(t){if(!f)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p(t);var i=u.getItem(r+t);return!i||i==="null"?null:i.charAt(0)==="{"||i.charAt(0)==="["?angular.fromJson(i):i},v=function(t){if(!f)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),h.removeItem&&n.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:"cookie"}),c(t);try{u.removeItem(r+t);h.removeItem&&n.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:this.storageType})}catch(i){return n.$broadcast("LocalStorageModule.notification.error",i.message),c(t)}return!0},b=function(){var t,i,e;if(!f)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;t=r.length;i=[];for(e in u)if(e.substr(0,t)===r)try{i.push(e.substr(t))}catch(o){return n.$broadcast("LocalStorageModule.notification.error",o.Description),[]}return i},k=function(t){var e,o,s,i;if(t=t||"",e=r.slice(0,-1),o=new RegExp(e+"."+t),!f)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),l();s=r.length;for(i in u)if(o.test(i))try{v(i.substr(s))}catch(h){return n.$broadcast("LocalStorageModule.notification.error",h.message),l()}return!0},y=function(){try{return navigator.cookieEnabled||"cookie"in i&&(i.cookie.length>0||(i.cookie="test").indexOf.call(i.cookie,"test")>-1)}catch(t){return n.$broadcast("LocalStorageModule.notification.error",t.message),!1}},s=function(t,u){var h;if(typeof u=="undefined")return!1;if(!y())return n.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var o="",f=new Date,s="";u===null?(f.setTime(f.getTime()+-864e5),o="; expires="+f.toGMTString(),u=""):e.expiry!==0&&(f.setTime(f.getTime()+e.expiry*864e5),o="; expires="+f.toGMTString());!t||(h="; path="+e.path,e.domain&&(s="; domain="+e.domain),i.cookie=r+t+"="+encodeURIComponent(u)+o+h+s)}catch(c){return n.$broadcast("LocalStorageModule.notification.error",c.message),!1}return!0},p=function(t){var e,f,u;if(!y())return n.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(e=i.cookie&&i.cookie.split(";")||[],f=0;f<e.length;f++){for(u=e[f];u.charAt(0)===" ";)u=u.substring(1,u.length);if(u.indexOf(r+t+"=")===0)return decodeURIComponent(u.substring(r.length+t.length+1,u.length))}return null},c=function(n){s(n,null)},l=function(){for(var f,n=null,e=r.length,u=i.cookie.split(";"),t=0;t<u.length;t++){for(n=u[t];n.charAt(0)===" ";)n=n.substring(1,n.length);f=n.substring(e,n.indexOf("="));c(f)}},d=function(){return o};return{isSupported:f,getStorageType:d,set:a,add:a,get:w,keys:b,remove:v,clearAll:k,cookie:{set:s,add:s,get:p,remove:c,clearAll:l}}}]})}).call(this);
/*
//# sourceMappingURL=angular-local-storage.min.js.map
*/